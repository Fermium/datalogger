#!/bin/sh


OS_VERSION=$(sw_vers -productVersion)

case ${OS_VERSION%.*} in
	10.12)
		HOMEBREW_NAME="sierra"
		;;
	10.11)
		HOMEBREW_NAME="el_capitan"
		;;
	10.10)
		HOMEBREW_NAME="yosemite"
		;;
	*   )
		print "ERROR: Your version of the operative system is not supported"
		return 1 ;;
  esac

#if the package is already installed. Test with "if test -n $foundPackage"
#foundPackage="/usr/sbin/pkgutil --volume $3 --pkgs=com.fermiumlabs.datalogger"

# check out https://fermiumlabs-homebrew-mirror.s3.amazonaws.com/index.html
curl -o "$INSTALLER_TEMP/libusb.tar.gz" "https://fermiumlabs-homebrew-mirror.s3.amazonaws.com/libusb-1.0.21.$HOMEBREW_NAME.bottle.tar.gz"
tar xzf "$INSTALLER_TEMP/libusb.tar.gz" -C "$INSTALLER_TEMP/"
# Copy, but do not overwrite if it already exists. This means the user probably used homebrew
cp --no-clobber "$INSTALLER_TEMP"/libusb/1.0.21/lib/libusb* "/usr/local/lib/"


return 0
